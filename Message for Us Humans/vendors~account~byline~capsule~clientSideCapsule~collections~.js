(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"2ePO":function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r("lSNA"));function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var a=function(e){return Array.isArray(e)&&(null==e?void 0:e.reduce((function(e,t){var r=t.productCode,n=t.isFreeTrial,o=t.freeTrialSignupTime;return u(u({},e),{},(0,i.default)({},r,{isFreeTrial:n,freeTrialSignupTime:o}))}),{}))||{}};t.default=a},"4LjT":function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.userQuery=t.userGraphql=t.subscribeQuery=t.subscribeGraphql=t.subscribeAnonymousQuery=t.subscribeAnonymousGraphql=t.newsletterProductDataGraphql=void 0;var i=n(r("lSNA"));function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var a="\n  query UserQuery {\n    user {\n      __typename\n      profile {\n        displayName\n        email\n      }\n      newsletterSubscriptions {\n        newsletters {\n          productCode\n          isFreeTrial\n          freeTrialSignupTime\n        }\n      }\n      userInfo {\n        regiId\n        entitlements\n      }\n    }\n  }";t.userGraphql=a;var s="\n  mutation subToNewsletters($input: CreateNoCaptchaNewsletterSubscriptionInput!) {\n    createNoCaptchaNewsletterSubscription(input: $input) {\n      message\n    }\n  }\n";t.subscribeGraphql=s;var l="\n  mutation CreateNewsletterSubscriptionInput($newsletterInput: CreateNewsletterSubscriptionInput!) {\n    createNewsletterSubscription(input: $newsletterInput) {\n      clientMutationId\n      userErrors\n      __typename\n    }\n  }\n";t.subscribeAnonymousGraphql=l;t.newsletterProductDataGraphql="\n  query NewsletterProductDataQuery($code: String) {\n    newsletterProductData(code: $code) {\n      code\n      name\n      newsletterId\n      allowedEntitlement\n      isOnsiteFreeTrialEnabled\n      signupModuleSummary\n      subscriptionPageLink\n      sampleLink\n      signupAltText\n      splashThumbImage\n      frequency\n    }\n  }\n";var c=JSON.stringify({operationName:"UserQuery",variables:{},query:a});t.userQuery=c;t.subscribeQuery=function(e,t){if(null==e||!e.productCode)throw new Error("Missing product code");return JSON.stringify({operationName:"subToNewsletters",variables:{input:u({newsletters:[e]},t||{})},query:s})};t.subscribeAnonymousQuery=function(e,t){if(null==e||!e.productCode)throw new Error("Missing product code");var r=null!=t&&t.signupFormVersion?"".concat(t.signupFormVersion):"newsletter_updates_v1",n=u(u({clientMutationId:"0"},t),{},{signupFormVersion:r});return JSON.stringify({operationName:"CreateNewsletterSubscriptionInput",variables:{newsletterInput:u({newsletters:[e]},n)},query:l})}},"5E+G":function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.VIEW_NAMES=t.SUBSCRIPTIONS_SPLASH_PAGE_DEFAULT=t.SIGNUP_TYPE=t.SIGNUP_FADE_MS=t.MODULE_TYPES=t.IN_ARTICLE_CTA_TEXT=t.IN_ARTICLE_CONFIRMATION_MSG=t.IN_ARTICLE_CONFIRMATION_CTA_TEXT=t.INDIVIDUAL_SIGNUP_CTA_TEXT=t.INDIVIDUAL_SIGNUP_CONFIRMATION_MSG=t.FREE_TRIAL_PERIOD_IN_SECS=void 0;var i,o,u,a,s=n(r("lSNA"));t.VIEW_NAMES={LOGGED_OUT_MODAL:"loggedOutModal",LOGGED_OUT_INLINE:"loggedOut",ALREADY_SIGNED_UP:"alreadySubscribed",LOGGED_IN_SIGNUP:"loggedIn",CONFIRMATION:"confirmation"};t.MODULE_TYPES={INLINE:"inline",MODAL:"modal",OAK_ARTICLE:"oakArticle"};var l={DEFAULT:"DEFAULT",SUBSCRIBER:"SUBSCRIBER",FREE_TRIAL:"FREE_TRIAL",NEED_SUBSCRIPTION:"NEED_SUBSCRIPTION"};t.SIGNUP_TYPE=l;var c=(i={},(0,s.default)(i,l.DEFAULT,"Get it sent to your inbox."),(0,s.default)(i,l.SUBSCRIBER,"Get it in your inbox."),(0,s.default)(i,l.FREE_TRIAL,"Try it for 4 weeks."),(0,s.default)(i,l.NEED_SUBSCRIPTION,"Get it with a Times subscription."),i);t.IN_ARTICLE_CTA_TEXT=c;var d=(o={},(0,s.default)(o,l.DEFAULT,"Sign Up"),(0,s.default)(o,l.SUBSCRIBER,"Sign Up"),(0,s.default)(o,l.FREE_TRIAL,"Try it for 4 weeks"),(0,s.default)(o,l.NEED_SUBSCRIPTION,"Get it with a Times Subscription"),o);t.INDIVIDUAL_SIGNUP_CTA_TEXT=d;t.IN_ARTICLE_CONFIRMATION_MSG={DEFAULT:"Thank you for signing up. We have other newsletters you may enjoy."};var f=(u={},(0,s.default)(u,l.DEFAULT,"Thank you for signing up."),(0,s.default)(u,l.SUBSCRIBER,"Thank you for signing up."),(0,s.default)(u,l.FREE_TRIAL,"Thank you for signing up for 4 week complimentary access."),u);t.INDIVIDUAL_SIGNUP_CONFIRMATION_MSG=f;var p=(a={},(0,s.default)(a,l.DEFAULT,"Take a look."),(0,s.default)(a,l.SUBSCRIBER,"Explore more newsletters."),(0,s.default)(a,l.FREE_TRIAL,"Explore more subscriber-only newsletters."),a);t.IN_ARTICLE_CONFIRMATION_CTA_TEXT=p;t.SUBSCRIPTIONS_SPLASH_PAGE_DEFAULT="https://www.nytimes.com/subscription?st=sonewsletters";t.FREE_TRIAL_PERIOD_IN_SECS=2419200;t.SIGNUP_FADE_MS=750},CQ4Z:function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.subscribe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l((0,u.subscribeQuery)(e,t))},t.subscribeAnonymous=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l((0,u.subscribeAnonymousQuery)(e,t))},t.user=function(){return l(u.userQuery)};var i=n(r("lSNA")),o=r("T25G"),u=r("4LjT");function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e){var t=function(){if("undefined"!=typeof window&&window.__preloadedData){var e,t=window.__preloadedData.config,r=(null===(e=window)||void 0===e?void 0:e.location).hostname;return s(s({},t),{},{hostname:r})}return{}}(),r=t.gqlUrlClient,n=t.gqlRequestHeaders,i=t.hostname;return"undefined"!=typeof fetch&&r&&n?fetch(r,{method:"POST",credentials:"include",mode:(0,o.isNYTDomain)(i)?"cors":"no-cors",headers:n,body:e}).then((function(e){var t=e.ok;return"opaque"===e.type?e:t?e.json():Promise.reject(new Error(e.statusText))})):Promise.resolve({})}},"Ds/+":function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r("o0o1")),o=n(r("yXPU")),u=n(r("lwsE")),a=n(r("W8MJ")),s=r("CQ4Z"),l=function(){function e(t){(0,u.default)(this,e),this.productCode=t.newsletterId,this.data=t}var t;return(0,a.default)(e,[{key:"getData",value:function(){return this.data}},{key:"signup",value:(t=(0,o.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.subscribe)({productCode:this.productCode},t);case 2:return e.abrupt("return",{success:!0});case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();t.default=l},KMmm:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){var r,n,i=t.productCode;return(null==e||null===(r=e.newsletterSubscriptions)||void 0===r||null===(n=r.newsletters)||void 0===n?void 0:n.find((function(e){return e.productCode===i})))||null};t.default=n},T25G:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkMatchingProductCodes=function(e,t){var r=decodeURIComponent(t.get("product_code"));return!!r&&e===r},t.getConfirmationText=t.getButtonText=void 0,t.getCookie=function(e){var t="; ".concat(document.cookie).split("; ".concat(e,"="));return 2===t.length?t.pop().split(";").shift():null},t.getSignupType=void 0,t.hasNYTSCookie=function(){return"undefined"!=typeof window&&-1!==document.cookie.indexOf("NYT-S")},t.isNYTDomain=function(e){return/nytimes\.com$/.test(e)},t.warnOnError=t.nameWithArticle=t.isValidNewsletterCode=void 0;var n=r("5E+G");var i=function(e){return null!=e&&e.startsWith("The ")?e:"the ".concat(e)};t.nameWithArticle=i;t.isValidNewsletterCode=function(e){var t=/^[A-Z]{2,4}$/;return Array.isArray(e)&&e.length>0?e.filter((function(e){return t.test(e)})).length>0:t.test(e)};t.warnOnError=function(e){return console.warn(e.message)};var o=function(e){var t=e.allowedEntitlement,r=e.isOnsiteFreeTrialEnabled,i=e.isEligibleForNewsletter,o=e.hasTakenFreeTrial;return t?i?n.SIGNUP_TYPE.SUBSCRIBER:r&&!o?n.SIGNUP_TYPE.FREE_TRIAL:n.SIGNUP_TYPE.NEED_SUBSCRIPTION:n.SIGNUP_TYPE.DEFAULT};t.getSignupType=o;t.getButtonText=function(e){var t=e.page,r=e.name,i=e.allowedEntitlement,u=e.isOnsiteFreeTrialEnabled,a=e.isEligibleForNewsletter,s=e.hasTakenFreeTrial,l=o({allowedEntitlement:i,isOnsiteFreeTrialEnabled:u,isEligibleForNewsletter:a,hasTakenFreeTrial:s}),c="article"===t?n.IN_ARTICLE_CTA_TEXT:n.INDIVIDUAL_SIGNUP_CTA_TEXT;return l===n.SIGNUP_TYPE.FREE_TRIAL&&r?"".concat(n.INDIVIDUAL_SIGNUP_CTA_TEXT[n.SIGNUP_TYPE.FREE_TRIAL],"."):c[l]};t.getConfirmationText=function(e){var t=e.page,r=e.name,u=e.allowedEntitlement,a=e.isOnsiteFreeTrialEnabled,s=e.isEligibleForNewsletter,l=e.hasTakenFreeTrial,c=o({allowedEntitlement:u,isOnsiteFreeTrialEnabled:a,isEligibleForNewsletter:s,hasTakenFreeTrial:l}),d="article"===t?n.IN_ARTICLE_CONFIRMATION_MSG:n.INDIVIDUAL_SIGNUP_CONFIRMATION_MSG;return c===n.SIGNUP_TYPE.FREE_TRIAL&&r?"You are now signed up for 4 weeks of ".concat(i(r)," newsletter."):c===n.SIGNUP_TYPE.SUBSCRIBER&&r?"You are now signed up for ".concat(i(r)," newsletter. Thank you for being a Times subscriber."):d[c]}},rLXl:function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.isEligibleForNewsletter=t.getFreeTrialSubscriptionParams=t.checkHasTakenFreeTrial=void 0,t.isEligibleToSignup=u,t.isFreeTrialSignup=t.isFreeTrialPeriodComplete=void 0;var i=r("5E+G"),o=n(r("2ePO"));function u(e,t){return!e||!!t&&(Array.isArray(t)&&t.includes(e))}t.isEligibleForNewsletter=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.hasEligibleEntitlement,n=t.allowedEntitlement,i=t.user;return r||u(n,null==i||null===(e=i.userInfo)||void 0===e?void 0:e.entitlements)};var a=function(e){return!!e&&Math.floor(Date.now()/1e3)-e>i.FREE_TRIAL_PERIOD_IN_SECS};t.isFreeTrialPeriodComplete=a;t.checkHasTakenFreeTrial=function(e,t){var r=(0,o.default)(null==e?void 0:e.newsletters);if(!r[t])return!1;var n=r[t].freeTrialSignupTime;return a(n)};t.isFreeTrialSignup=function(e,t,r){return!(!e||!t)&&(Array.isArray(r)&&!r.includes(e))};t.getFreeTrialSubscriptionParams=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=!1,i=r;return e&&!t&&(n=!0,i=i||Math.floor(Date.now()/1e3)),{isFreeTrial:n,freeTrialSignupTime:i}}},tPsl:function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r("o0o1")),o=n(r("lSNA")),u=n(r("yXPU")),a=n(r("lwsE")),s=n(r("W8MJ")),l=r("CQ4Z"),c=n(r("KMmm")),d=r("rLXl");function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var T=function(){function e(t){if((0,a.default)(this,e),!t.allowedEntitlement)throw new Error("Not a SubOnlyNewsletter");this.productCode=t.newsletterId,this.allowedEntitlement=t.allowedEntitlement,this.data=t}var t;return(0,s.default)(e,[{key:"getData",value:function(){return this.data}},{key:"allowsFreeTrial",value:function(){return 1===this.data.isOnsiteFreeTrialEnabled}},{key:"isEligible",value:function(e){var t,r=(null==e?void 0:e.entitlements)||(null==e||null===(t=e.userInfo)||void 0===t?void 0:t.entitlements);return!!r&&r.includes(this.allowedEntitlement)}},{key:"canTakeFreeTrial",value:function(e){if(!this.allowsFreeTrial()||this.isEligible(e))return!1;var t=(0,c.default)(e,this);return!t||!(0,d.isFreeTrialPeriodComplete)(t.freeTrialSignupTime)}},{key:"signup",value:(t=(0,u.default)(i.default.mark((function e(t){var r,n,o,u,a,s,d,f,T;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.productCode,e.next=3,(0,l.user)();case 3:if(n=e.sent,o=n.data,u=null==o?void 0:o.user,a=this.isEligible(u),s=this.canTakeFreeTrial(u),d=(0,c.default)(u,this),f=!a&&!s,d){e.next=14;break}return T=s?{productCode:r,isFreeTrial:!0,freeTrialSignupTime:Math.floor(Date.now()/1e3)}:{productCode:r},e.next=14,(0,l.subscribe)(T,p(p({},t),f?{confirm:!1}:{}));case 14:if(!f){e.next=16;break}return e.abrupt("return",{success:!1,subscriptionNeeded:!0});case 16:return e.abrupt("return",{success:!0,takingFreeTrial:s});case 17:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();t.default=T}}]);
//# sourceMappingURL=vendors~account~byline~capsule~clientSideCapsule~collections~explainer~getstarted~liveAsset~newslett~64426ae5-506798ca96de1ea2e924.js.map